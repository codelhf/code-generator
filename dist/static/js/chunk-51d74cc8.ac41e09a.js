(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51d74cc8"],{"0e4b":function(e,t,a){"use strict";var l=a("7f7e"),n=a.n(l);n.a},"7f7e":function(e,t,a){},c621:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"b",(function(){return s}));var l=a("b775");function n(e){return Object(l["a"])({url:"/template/list",method:"get",params:e})}function r(e){return Object(l["a"])({url:"/template/export",method:"get",responseType:"blob",params:e})}function i(e){return Object(l["a"])({url:"/template/dump",method:"post",data:e})}function o(e){return Object(l["a"])({url:"/template/select",method:"get",params:{id:e}})}function u(e){return Object(l["a"])({url:"/template/check",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/template/insert",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/template/update",method:"put",data:e})}function s(e){return Object(l["a"])({url:"/template/delete",method:"delete",params:{ids:e}})}},d9f8:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"b",(function(){return m}));var l=a("b775");function n(e){return Object(l["a"])({url:"/templateGroup/list",method:"get",params:e})}function r(e){return Object(l["a"])({url:"/templateGroup/select",method:"get",params:{id:e}})}function i(e){return Object(l["a"])({url:"/templateGroup/check",method:"post",data:e})}function o(e){return Object(l["a"])({url:"/templateGroup/insert",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/templateGroup/update",method:"put",data:e})}function m(e){return Object(l["a"])({url:"/templateGroup/delete",method:"delete",params:{ids:e}})}},fde7:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("el-form",{ref:"templateForm",attrs:{model:e.template,rules:e.templateRules(),"label-width":"120px","label-suffix":":"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("template.item.group"),prop:"groupId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("template.item.placeholderGroup")},model:{value:e.template.groupId,callback:function(t){e.$set(e.template,"groupId",t)},expression:"template.groupId"}},e._l(e.groupList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("template.item.type"),prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("template.item.placeholderType")},model:{value:e.template.type,callback:function(t){e.$set(e.template,"type",t)},expression:"template.type"}},[a("el-option",{attrs:{label:e.$t("template.item.type1"),value:1}}),a("el-option",{attrs:{label:e.$t("template.item.type2"),value:2}}),a("el-option",{attrs:{label:e.$t("template.item.type3"),value:3}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("template.item.name"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$t("template.item.placeholderName")},on:{blur:e.handleCheckName},model:{value:e.template.name,callback:function(t){e.$set(e.template,"name",t)},expression:"template.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("template.item.fileType"),prop:"fileType"}},[a("el-input",{attrs:{placeholder:e.$t("template.item.placeholderFileType")},model:{value:e.template.fileType,callback:function(t){e.$set(e.template,"fileType",t)},expression:"template.fileType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("template.item.desc")}},[a("el-input",{attrs:{placeholder:e.$t("template.item.placeholderDesc")},model:{value:e.template.desc,callback:function(t){e.$set(e.template,"desc",t)},expression:"template.desc"}})],1)],1)],1),a("el-form-item",{attrs:{label:e.$t("template.item.template"),prop:"template"}},[a("code-editor",{key:e.timer,attrs:{value:e.template.template,placeholder:e.$t("template.item.placeholderTemplate")},on:{input:e.handleTemplate},model:{value:e.template.template,callback:function(t){e.$set(e.template,"template",t)},expression:"template.template"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleFormSubmit("templateForm")}}},[e._v(e._s(e.$t("common.form.confirm")))]),a("el-button",{on:{click:function(t){return e.handleFormClose("templateForm")}}},[e._v(e._s(e.$t("common.form.cancel")))])],1)],1)],1)},n=[],r=(a("b0c0"),a("c621")),i=a("d9f8"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"in-coder-panel"},[a("el-input",{ref:"codeEditor",attrs:{id:"codeEditor",type:"textarea",placeholder:e.placeholder},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)},u=[],m=(a("7db0"),a("a15b"),a("a7be"),a("9603"),a("f6b6"),a("56b3")),p=a.n(m),s=(a("8c33"),a("31c5"),a("9b74"),a("e1de"),a("f9d4"),{name:"CodeEditor",props:{value:{type:String,default:""},language:{type:String,default:null},placeholder:{type:String,required:!1,default:""}},data:function(){return{code:"",mode:"x-javascript",modes:[{value:"x-handlebars-template",label:"Handlebars"},{value:"javascript",label:"Javascript"}],coder:null,option:{indentUnit:4,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,lineWrapping:!0,styleActiveLine:!0,showCursorWhenSelecting:!0,theme:"mbo",mode:"text/x-handlebars-template",extraKeys:{"Alt-/":"autocomplete",Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)}}}}},mounted:function(){console.log(this.value),this._initialize()},methods:{_initialize:function(){var e=this,t=document.getElementById("codeEditor");if(this.coder=p.a.fromTextArea(t,this.option),console.log(this.value),this.coder.setValue(this.value||this.code),this.coder.on("change",(function(t){e.code=t.getValue(),e.$emit&&e.$emit("input",e.code)})),this.language){var a=this._getLanguage(this.language);a&&(this.mode=a.label)}},_getLanguage:function(e){return this.modes.find((function(t){var a=e.toLowerCase(),l=t.label.toLowerCase(),n=t.value.toLowerCase();return l===a||n===a}))},changeMode:function(e){this.coder.setOption("mode","text/".concat(e));var t=this._getLanguage(e).label.toLowerCase();this.$emit("language-change",t)}}}),c=s,d=(a("0e4b"),a("2877")),f=Object(d["a"])(c,o,u,!1,null,null,null),h=f.exports,b={name:"Detail",components:{CodeEditor:h},data:function(){return{template:{id:"",groupId:"",name:"",desc:"",type:null,fileType:"",template:"",cteTime:"",uteTime:""},groupList:[],timer:""}},created:function(){this.id=this.$route.params.id,this.timer=(new Date).getTime(),this.getDetail(),this.getGroupList()},methods:{templateRules:function(){return{groupId:[{required:!0,message:this.$t("template.itemRules.group"),trigger:"blur"}],name:[{required:!0,message:this.$t("template.itemRules.name"),trigger:"blur"}],desc:[{required:!0,message:this.$t("template.itemRules.desc"),trigger:"blur"}],type:[{required:!0,message:this.$t("template.itemRules.type"),trigger:"blur"}],fileType:[{required:!0,message:this.$t("template.itemRules.fileType"),trigger:"blur"}],template:[{required:!0,message:this.$t("template.itemRules.template"),trigger:"blur"}]}},getDetail:function(){var e=this;this.template={},"0"!==this.id&&Object(r["g"])(this.id).then((function(t){e.template=t.data,e.timer=(new Date).getTime()}))},handleTemplate:function(e){this.template.template=e},handleCheckName:function(){var e=this;Object(r["a"])(this.template).then((function(e){}),(function(){e.$message.error(e.template.name+" "+e.$t("common.message.exists"))}))},handleFormClose:function(e){this.$refs[e].resetFields(),this.$router.push("/template/index")},handleFormSubmit:function(e){var t=this;this.$refs[e].validate((function(a){a&&(t.template.id?Object(r["h"])(t.template).then((function(a){t.handleFormClose(e)})):Object(r["e"])(t.template).then((function(a){t.handleFormClose(e)})))}))},getGroupList:function(){var e=this;Object(i["d"])({}).then((function(t){e.groupList=t.data}))}}},g=b,v=Object(d["a"])(g,l,n,!1,null,"05109385",null);t["default"]=v.exports}}]);