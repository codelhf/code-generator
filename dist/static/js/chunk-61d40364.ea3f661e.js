(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61d40364"],{"24d2":function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return s}));var r=a("b775");function l(e){return Object(r["a"])({url:"/project/list",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/project/select",method:"get",params:{id:e}})}function n(e){return Object(r["a"])({url:"/project/insert",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/project/update",method:"put",data:e})}function c(e){return Object(r["a"])({url:"/project/delete",method:"delete",params:{ids:e}})}function s(){return Object(r["a"])({url:"/project/lastId",method:"get"})}},"32f1":function(e,t,a){"use strict";var r=a("d642"),l=a.n(r);l.a},8128:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("table-list",{ref:"tableList",attrs:{data:e.tableList},on:{tableClick:e.handleTableClick}})],1),a("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:20}},[a("template-list",{key:e.projectId,ref:"templateList",attrs:{"project-id":e.projectId}}),a("el-form",{ref:"currentTable",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,"label-width":"100px"},model:{value:e.currentTable,callback:function(t){e.currentTable=t},expression:"currentTable"}},[a("el-form-item",{attrs:{label:e.$t("projectGenerate.currentTable.domainName")}},[a("el-input",{attrs:{placeholder:e.$t("projectGenerate.currentTable.placeholderDomainName")},model:{value:e.currentTable.domainName,callback:function(t){e.$set(e.currentTable,"domainName",t)},expression:"currentTable.domainName"}})],1),a("el-form-item",{attrs:{label:e.$t("projectGenerate.currentTable.generateKey")}},[a("el-input",{attrs:{placeholder:e.$t("projectGenerate.currentTable.placeholderGenerateKey")},model:{value:e.currentTable.generateKey,callback:function(t){e.$set(e.currentTable,"generateKey",t)},expression:"currentTable.generateKey"}})],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",loading:e.loading},on:{click:e.handleGenerate}},[e._v(e._s(e.$t("projectGenerate.button.generateCode")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleDetail}},[e._v(e._s(e.$t("projectGenerate.button.addTemplate")))])],1)],1),a("div",{staticStyle:{width:"100%"}},[a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.generateResult,callback:function(t){e.generateResult=t},expression:"generateResult"}})],1)],1)],1)],1)},l=[],i=(a("d81d"),a("24d2")),n=a("b775");function o(e){return Object(n["a"])({url:"/projectTable/all",method:"get",params:e})}function c(e,t){return Object(n["a"])({url:"/projectTable/select",method:"get",params:{projectId:e,tableName:t}})}function s(e,t){return Object(n["a"])({url:"/projectTable/generate?projectId="+e,method:"post",data:t})}var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px",border:"1px solid #eee","border-radius":"4px"}},[a("el-input",{on:{input:e.filterTable},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},e._l(e.filterData,(function(t){return a("div",{key:t.tableName,class:t.active?"item active":"item",on:{click:function(a){return e.clickTableItem(t)}}},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":1===t.tableType?"table":"view"}}),a("span",{staticClass:"name"},[e._v(e._s(t.tableName))])],1)})),0)],1)},u=[],m=(a("4de4"),a("c975"),{name:"DataSourceTable",props:{data:{type:Array,required:!0}},data:function(){return{filterText:"",filterData:[]}},watch:{data:function(){this.filterTable()}},methods:{filterTable:function(){var e=this;this.filterData=this.data.filter((function(t){return!e.filterText||(e.filterText?t.tableName.toLowerCase().indexOf(e.filterText.toLowerCase())>-1:void 0)}))},clickTableItem:function(e){this.$emit("tableClick",e)}}}),d=m,f=(a("32f1"),a("2877")),b=Object(f["a"])(d,p,u,!1,null,null,null),h=b.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())})),height:"320","highlight-current-row":"",border:"border"}},[a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.directory"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.directory))])]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.packageName"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.packageName))])]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.fileSuffix"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.fileSuffix))])]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.isGenerate"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-text":e.$t("projectTemplate.switch.activeText"),"inactive-text":e.$t("projectTemplate.switch.inactiveText"),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleTableSwitch(t.row)}},model:{value:t.row.isGenerate,callback:function(a){e.$set(t.row,"isGenerate",a)},expression:"scope.row.isGenerate"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.isOverride"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-text":e.$t("projectTemplate.switch.activeText"),"inactive-text":e.$t("projectTemplate.switch.inactiveText"),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleTableSwitch(t.row)}},model:{value:t.row.isOverride,callback:function(a){e.$set(t.row,"isOverride",a)},expression:"scope.row.isOverride"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("projectTemplate.table.operation"),align:"center",width:"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:e.$t("projectTemplate.table.operation")},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleDetail(t.row.id)}}},[e._v(e._s(e.$t("projectTemplate.table.edit")))]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v(e._s(e.$t("projectTemplate.table.delete")))])]}}])})],1),a("el-dialog",{attrs:{title:e.projectTemplate.id?e.$t("projectTemplate.item.editTitle"):e.$t("projectTemplate.item.addTitle"),visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.handleFormClose("projectTemplateForm")}}},[a("el-form",{ref:"projectTemplateForm",attrs:{model:e.projectTemplate,rules:e.projectTemplateRules(),"label-width":"130px","label-suffix":":"}},[a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.templateId"),prop:"templateId"}},[a("el-select",{attrs:{filterable:"",placeholder:e.$t("projectTemplate.item.placeholderName")},model:{value:e.projectTemplate.templateId,callback:function(t){e.$set(e.projectTemplate,"templateId",t)},expression:"projectTemplate.templateId"}},e._l(e.templateList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.directory"),prop:"directory"}},[a("el-input",{attrs:{placeholder:e.$t("projectTemplate.item.placeholderDirectory")},model:{value:e.projectTemplate.directory,callback:function(t){e.$set(e.projectTemplate,"directory",t)},expression:"projectTemplate.directory"}})],1),a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.packageName"),prop:"packageName"}},[a("el-input",{attrs:{placeholder:e.$t("projectTemplate.item.placeholderPackageName")},model:{value:e.projectTemplate.packageName,callback:function(t){e.$set(e.projectTemplate,"packageName",t)},expression:"projectTemplate.packageName"}})],1),a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.fileSuffix"),prop:"fileSuffix"}},[a("el-input",{attrs:{placeholder:e.$t("projectTemplate.item.placeholderFileSuffix")},model:{value:e.projectTemplate.fileSuffix,callback:function(t){e.$set(e.projectTemplate,"fileSuffix",t)},expression:"projectTemplate.fileSuffix"}})],1),a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.isGenerate"),prop:"isGenerate"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-text":e.$t("projectTemplate.switch.activeText"),"inactive-text":e.$t("projectTemplate.switch.inactiveText"),"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.projectTemplate.isGenerate,callback:function(t){e.$set(e.projectTemplate,"isGenerate",t)},expression:"projectTemplate.isGenerate"}})],1),a("el-form-item",{attrs:{label:e.$t("projectTemplate.item.isOverride"),prop:"isOverride"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-text":e.$t("projectTemplate.switch.activeText"),"inactive-text":e.$t("projectTemplate.switch.inactiveText"),"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.projectTemplate.isOverride,callback:function(t){e.$set(e.projectTemplate,"isOverride",t)},expression:"projectTemplate.isOverride"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleFormClose("projectTemplateForm")}}},[e._v(e._s(e.$t("projectTemplate.item.formCancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleFormSubmit("projectTemplateForm")}}},[e._v(e._s(e.$t("projectTemplate.item.formConfirm")))])],1)],1)],1)},j=[];function v(e){return Object(n["a"])({url:"/projectTemplate/list",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/projectTemplate/select",method:"get",params:{id:e}})}function $(e){return Object(n["a"])({url:"/projectTemplate/insert",method:"post",data:e})}function x(e){return Object(n["a"])({url:"/projectTemplate/update",method:"put",data:e})}function y(e){return Object(n["a"])({url:"/projectTemplate/delete",method:"delete",params:{ids:e}})}var w=a("c621"),k={name:"ProjectTemplate",props:{projectId:{type:String,required:!0}},data:function(){return{tableKey:0,list:[],listLoading:!0,search:"",templateList:[],dialogFormVisible:!1,projectTemplate:{id:"",projectId:"",templateId:"",directory:"",packageName:"",fileSuffix:"",isGenerate:1,isOverride:1,name:"",type:null,fileType:""}}},created:function(){this.getList(),this.getTemplateList()},methods:{projectTemplateRules:function(){return{projectId:[{required:!0,message:this.$t("projectTemplate.itemRules.projectId"),trigger:"blur"}],templateId:[{required:!0,message:this.$t("projectTemplate.itemRules.templateId"),trigger:"blur"}],directory:[{required:!0,message:this.$t("projectTemplate.itemRules.directory"),trigger:"blur"}],packageName:[{required:!0,message:this.$t("projectTemplate.itemRules.packageName"),trigger:"blur"}],fileSuffix:[{required:!0,message:this.$t("projectTemplate.itemRules.fileSuffix"),trigger:"blur"}],isGenerate:[{required:!0,message:this.$t("projectTemplate.itemRules.isGenerate"),trigger:"blur"}],isOverride:[{required:!0,message:this.$t("projectTemplate.itemRules.isOverride"),trigger:"blur"}]}},getList:function(){var e=this,t={projectId:this.projectId};v(t).then((function(t){e.list=t.data.list,e.total=t.data.total,setTimeout((function(){e.listLoading=!1}),1500)}))},getTemplateList:function(){var e=this;Object(w["f"])({}).then((function(t){e.templateList=t.data.list}))},handleTableSwitch:function(e){var t=this;x(e).then((function(e){t.getList()}))},handleDetail:function(e){var t=this;this.dialogFormVisible=!0,this.projectTemplate={projectId:this.projectId,isGenerate:1,isOverride:1},e&&g(e).then((function(e){t.projectTemplate=e.data,t.projectTemplate.projectId=t.projectId}))},handleDelete:function(e){var t=this;this.$confirm(this.$t("projectTemplate.confirm.deleteOne"),this.$t("projectTemplate.confirm.title"),{cancelButtonText:this.$t("projectTemplate.confirm.cancel"),confirmButtonText:this.$t("projectTemplate.confirm.confirm"),type:"warning"}).then((function(){y(e).then((function(){t.getList()}))}))},handleFormClose:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},handleFormSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.projectTemplate.id?x(t.projectTemplate).then((function(e){t.dialogFormVisible=!1,t.getList()})):$(t.projectTemplate).then((function(e){t.dialogFormVisible=!1,t.getList()})))}))}}},O=k,_=Object(f["a"])(O,T,j,!1,null,"0fe07368",null),I=_.exports,L={name:"Home",components:{TableList:h,TemplateList:I},data:function(){return{projectId:"",tableList:[],currentTable:{id:"",projectId:"",tableName:"",tableType:null,domainName:"",generateKey:""},loading:!1,generateResult:""}},created:function(){var e=this;this.$route.params.id?(this.projectId=this.$route.params.id,this.getTableList()):Object(i["c"])().then((function(t){e.projectId=t.data,e.getTableList()}))},methods:{getTableList:function(){var e=this,t={projectId:this.projectId};o(t).then((function(t){e.tableList=t.data}))},handleTableClick:function(e){var t=this;c(this.projectId,e.tableName).then((function(a){a.data.tableName?t.currentTable=a.data:t.currentTable=e,t.tableList=t.tableList.map((function(e){return e.active=!1,e.tableName===t.currentTable.tableName&&(e.id=t.currentTable.id,e.domainName=t.currentTable.domainName,e.generateKey=t.currentTable.generateKey,e.active=t.currentTable.active=!0),e}))}))},handleGenerate:function(){var e=this;if(this.currentTable.tableName){var t=this.$refs.templateList.list;0!==t.length?(this.loading=!0,this.generateResult="",s(this.projectId,[this.currentTable]).then((function(t){setTimeout((function(){e.loading=!1,e.generateResult=t.data}),1500)}))):this.$message.warning(this.$t("projectGenerate.button.templateWarning"))}else this.$message.warning(this.$t("projectGenerate.button.tableWarning"))},handleDetail:function(){this.$refs.templateList.handleDetail()}}},N=L,S=Object(f["a"])(N,r,l,!1,null,"09f5cc48",null);t["default"]=S.exports},c621:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"h",(function(){return p})),a.d(t,"a",(function(){return u}));var r=a("b775");function l(e){return Object(r["a"])({url:"/template/list",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/template/export",method:"get",responseType:"blob",params:e})}function n(e){return Object(r["a"])({url:"/template/dump",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/template/select",method:"get",params:{id:e}})}function c(e,t){return Object(r["a"])({url:"/template/exists",method:"get",params:{id:e,name:t}})}function s(e){return Object(r["a"])({url:"/template/insert",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/template/update",method:"put",data:e})}function u(e){return Object(r["a"])({url:"/template/delete",method:"delete",params:{ids:e}})}},d642:function(e,t,a){}}]);